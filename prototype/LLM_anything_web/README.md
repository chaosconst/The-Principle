# LLM Anything Web

一个优雅的 Web 界面版本，实现人机共生的自然交互。

## 🎯 核心特性

1. **实时双向通信**：WebSocket 连接，消息即时传递
2. **智能暂停**：用户输入时 AI 自动暂停推理
3. **分类显示**：不同类型消息用不同颜色和样式
4. **流畅输入**：随时输入，无需模式切换
5. **主动等待**：AI 可主动等待人类输入 (`/wait_for_human`)
6. **流式输出**：命令执行结果实时显示

## 🚀 快速开始

### 方式 1：使用启动脚本
```bash
cd prototype/LLM_anything_web
./run.sh
```

### 方式 2：手动启动
```bash
# 安装依赖
pip install fastapi uvicorn openai

# 设置 API KEY
export DB_API_KEY="your-api-key"

# 启动服务器
python3 app.py
```

然后在浏览器打开：http://localhost:8000

## 📸 界面预览

```
┌────────────────────────────────────┐
│     ✨ LLM Anything Web            │
│     人机共生界面                    │
├────────────────────────────────────┤
│                                    │
│  [09:30:15] AI: 正在思考...       │
│  [09:30:20] Human: 你好           │
│  [09:30:25] AI: 你好！我是...     │
│  [09:30:30] CMD: ls -la           │
│  [09:30:31] Result: ...           │
│                                    │
├────────────────────────────────────┤
│ [输入消息...            ] [发送]   │
└────────────────────────────────────┘
```

## 🎨 界面特点

- **紫色渐变背景**：现代美观
- **消息分类**：
  - 🔵 AI 思考（蓝色）
  - 🟣 人类输入（紫色）
  - 🟠 命令执行（橙色）
  - 🟢 执行结果（绿色）
  - 🔴 错误信息（红色）
- **动画效果**：消息淡入，按钮悬浮
- **自动滚动**：新消息自动滚动到底部

## 🔧 配置选项

```bash
export DB_API_KEY="your-api-key"        # API 密钥
export MODEL="google/gemini-2.5-pro"    # 模型选择
export BASE_URL="https://openrouter.ai/api/v1"  # API 端点
export LOOP_SEC=10                      # 推理间隔（秒）
export COMMAND_TIMEOUT=3600             # 命令超时（秒，默认1小时）
export TAIL_LINES=4000                  # 加载历史记录行数（默认4000）
```

## 📝 使用说明

1. **发送消息**：
   - Shift+Enter 发送
   - Enter 换行（支持输入法）

2. **输入检测**：
   - 聚焦输入框时 AI 自动暂停
   - 失去焦点后自动恢复

3. **消息历史**：
   - 所有对话保存在 `consciousness.txt`
   - 界面保留最近 4000 条消息

4. **AI 主动等待**：
   - 当 AI 输出 `/wait_for_human` 时进入等待模式
   - 显示 "⏸️ AI 正在等待你的输入..."
   - 输入任何消息后 AI 继续运行
   - 适用场景：需要更多信息、等待确认、请求指导

## 🆚 与终端版对比

| 特性 | Web 版 | 终端版 |
|------|--------|--------|
| 输入方式 | 随时输入 | 模式切换 |
| 界面美观 | ⭐⭐⭐⭐⭐ | ⭐⭐ |
| 使用门槛 | 低 | 中 |
| 跨平台 | ✅ | 部分 |
| 实时性 | 优秀 | 良好 |

## 🚧 已知限制

1. 单用户设计（本地使用）
2. 长时间运行可能内存增长
3. 命令执行结果限制 5000 字符

## 🔮 后续改进

- [ ] 添加深色模式
- [ ] 支持文件上传
- [ ] 历史记录搜索
- [ ] 导出对话功能
- [ ] 多会话支持

## 📄 许可证

MIT License - Copyright (c) 2025, Yuan Xingyuan (ChaosConst)